# Project: Migration and Insurgent Violence

## Overview
This paper studies the relationship between migration and insurgent violence
using call detail records (CDR) from Afghanistan (VFD data).

## Build system
- `make` rebuilds the full pipeline (only stale targets)
- `make clean && make` reproduces everything from scratch
- `make sync` pushes updated tables/figures/bib to Overleaf

## Directory structure
```
data/raw/VFD_data/    ← Primary CDR dataset (proprietary; .gitignored)
data/raw/dhs/         ← DHS Afghanistan survey (registration required)
data/raw/dtm/         ← IOM Displacement Tracking Matrix
data/raw/unhcr_query/ ← UNHCR refugee statistics
data/raw/worldbank/   ← World Bank indicators
data/derived/         ← Cleaned datasets generated by pipeline
data/gis/             ← QGIS project files
output/tables/        ← .tex table fragments
output/figures/       ← Figures (.png, .pdf)
paper/main.tex        ← Manuscript
paper/notes/          ← Brainstorms, meeting notes, outlines
archive/              ← Old/cut code and results
```

## Pipeline (numbered scripts in code/)
01–03: Clean and process VFD data, build migration algorithms
04–05: Sample restrictions and imputation (gap vs. no-gap variants)
06: Summary statistics on mobility
07: International migration estimates
08: Choice model setup
09: Survival analysis
10: GTD terrorism data matching (all events + high-casualty)
11–12: Mobility panel construction
z_*: Auxiliary scripts (UNHCR cleaning, GTD events, etc.)

## Key conventions
- All scripts start with `do "_config.do"` for paths and settings
- Old $AFG_CDR references should use $VFD (set in _config.do)
- Derived .dta files go to $derived, tables to $tables, figures to $figures
- The z_ scripts are support/auxiliary — not part of the main pipeline sequence

## Common tasks for Claude Code
- "Which scripts still reference $AFG_CDR? Help me update them to use _config.do"
- "Run make --dry-run and tell me which targets are stale"
- "Read code/07_estimates_international.do and summarize what regressions it runs"
- "Add Makefile rules for scripts 01 through 07"
